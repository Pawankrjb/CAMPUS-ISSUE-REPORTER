{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Spinner,Nav,Tab}from'react-bootstrap';import{useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import ReportList from'../reports/ReportList';import api from'../../services/api';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const UserDashboard=()=>{const{user}=useAuth();const navigate=useNavigate();const[stats,setStats]=useState({totalReports:0,pendingReports:0,inProgressReports:0,resolvedReports:0});const[activeTab,setActiveTab]=useState('all');const[loading,setLoading]=useState(true);useEffect(()=>{const fetchStats=async()=>{try{// Fetch all reports for the user and calculate stats\nconst response=await api.get(\"/reports?userId=\".concat(user===null||user===void 0?void 0:user._id));const reports=response.data;const calculatedStats={totalReports:reports.length,pendingReports:reports.filter(r=>r.status==='pending').length,inProgressReports:reports.filter(r=>r.status==='in-progress').length,resolvedReports:reports.filter(r=>r.status==='resolved').length};setStats(calculatedStats);}catch(error){console.error('Failed to fetch stats:',error);// Set default stats if API fails\nsetStats({totalReports:0,pendingReports:0,inProgressReports:0,resolvedReports:0});}finally{setLoading(false);}};if(user!==null&&user!==void 0&&user._id){fetchStats();}},[user===null||user===void 0?void 0:user._id]);return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"p-4\",style:{backgroundColor:'#f8f9fa',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4 align-items-center\",children:/*#__PURE__*/_jsxs(Col,{md:12,children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"fw-bold mb-1\",style:{color:'#4a6b7a',fontSize:'2rem'},children:[\"Welcome, \",(user===null||user===void 0?void 0:user.name)||'User',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Report and track issues in your campus\"})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{className:\"border-0 shadow-sm\",style:{backgroundColor:'#ffffff'},children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white py-3 border-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"fw-bold mb-0\",style:{color:'#4a6b7a'},children:\"Your Reports\"}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",size:\"sm\",className:\"px-3 py-1 rounded-pill\",style:{backgroundColor:'#80ACC2',border:'none'},onClick:()=>navigate('/report-form'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-1\"}),\"New Report\"]})]})}),/*#__PURE__*/_jsxs(Card.Body,{className:\"p-0\",children:[/*#__PURE__*/_jsxs(Tab.Container,{activeKey:activeTab,onSelect:k=>setActiveTab(k),children:[/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",className:\"px-4 pt-3 border-bottom\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"all\",className:\"text-muted fw-medium\",style:{color:activeTab==='all'?'#80ACC2':'#6c757d'},children:\"All Reports\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"pending\",className:\"text-muted fw-medium\",style:{color:activeTab==='pending'?'#80ACC2':'#6c757d'},children:\"Pending\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"in-progress\",className:\"text-muted fw-medium\",style:{color:activeTab==='in-progress'?'#80ACC2':'#6c757d'},children:\"In Progress\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"resolved\",className:\"text-muted fw-medium\",style:{color:activeTab==='resolved'?'#80ACC2':'#6c757d'},children:\"Resolved\"})})]}),/*#__PURE__*/_jsx(Tab.Content,{className:\"p-4\",children:/*#__PURE__*/_jsx(ReportList,{userId:user===null||user===void 0?void 0:user._id,status:activeTab==='all'?'':activeTab})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between p-3 border-top bg-light\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-secondary\",size:\"sm\",className:\"me-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-download me-1\"}),\"Export Reports\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-secondary\",size:\"sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell me-1\"}),\"Notification Settings\"]})]}),/*#__PURE__*/_jsxs(Button,{variant:\"link\",size:\"sm\",className:\"text-decoration-none\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-question-circle me-1\"}),\"Help Center\"]})]})]})]})})})]});};export default UserDashboard;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Spinner","Nav","Tab","useNavigate","useAuth","ReportList","api","jsxs","_jsxs","jsx","_jsx","UserDashboard","user","navigate","stats","setStats","totalReports","pendingReports","inProgressReports","resolvedReports","activeTab","setActiveTab","loading","setLoading","fetchStats","response","get","concat","_id","reports","data","calculatedStats","length","filter","r","status","error","console","fluid","className","style","backgroundColor","minHeight","children","md","color","fontSize","name","Header","variant","size","border","onClick","Body","activeKey","onSelect","k","Item","Link","eventKey","Content","userId"],"sources":["/Users/sunnykishan/maincp/campus-issue-reporter/frontend/src/components/dashboard/UserDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Button, Spinner, Nav, Tab } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport ReportList from '../reports/ReportList';\nimport api from '../../services/api';\n\nconst UserDashboard = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [stats, setStats] = useState({\n    totalReports: 0,\n    pendingReports: 0,\n    inProgressReports: 0,\n    resolvedReports: 0\n  });\n  const [activeTab, setActiveTab] = useState('all');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        // Fetch all reports for the user and calculate stats\n        const response = await api.get(`/reports?userId=${user?._id}`);\n        const reports = response.data;\n        \n        const calculatedStats = {\n          totalReports: reports.length,\n          pendingReports: reports.filter(r => r.status === 'pending').length,\n          inProgressReports: reports.filter(r => r.status === 'in-progress').length,\n          resolvedReports: reports.filter(r => r.status === 'resolved').length\n        };\n        \n        setStats(calculatedStats);\n      } catch (error) {\n        console.error('Failed to fetch stats:', error);\n        // Set default stats if API fails\n        setStats({\n          totalReports: 0,\n          pendingReports: 0,\n          inProgressReports: 0,\n          resolvedReports: 0\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (user?._id) {\n      fetchStats();\n    }\n  }, [user?._id]);\n\n  return (\n    <Container fluid className=\"p-4\" style={{ backgroundColor: '#f8f9fa', minHeight: '100vh' }}>\n      {/* Dashboard Header */}\n      <Row className=\"mb-4 align-items-center\">\n        <Col md={12}>\n          <h1 className=\"fw-bold mb-1\" style={{ color: '#4a6b7a', fontSize: '2rem' }}>\n            Welcome, {user?.name || 'User'}!\n          </h1>\n          <p className=\"text-muted mb-0\">Report and track issues in your campus</p>\n        </Col>\n      </Row>\n\n\n\n      {/* Reports Section */}\n      <Row>\n        <Col>\n          <Card className=\"border-0 shadow-sm\" style={{ backgroundColor: '#ffffff' }}>\n            <Card.Header className=\"bg-white py-3 border-bottom\">\n              <div className=\"d-flex justify-content-between align-items-center\">\n                <h4 className=\"fw-bold mb-0\" style={{ color: '#4a6b7a' }}>Your Reports</h4>\n                <Button \n                  variant=\"primary\" \n                  size=\"sm\"\n                  className=\"px-3 py-1 rounded-pill\"\n                  style={{ backgroundColor: '#80ACC2', border: 'none' }}\n                  onClick={() => navigate('/report-form')}\n                >\n                  <i className=\"fas fa-plus me-1\"></i>\n                  New Report\n                </Button>\n              </div>\n            </Card.Header>\n            <Card.Body className=\"p-0\">\n              {/* Filter Tabs */}\n              <Tab.Container activeKey={activeTab} onSelect={(k) => setActiveTab(k)}>\n                <Nav variant=\"tabs\" className=\"px-4 pt-3 border-bottom\">\n                  <Nav.Item>\n                    <Nav.Link \n                      eventKey=\"all\" \n                      className=\"text-muted fw-medium\"\n                      style={{ color: activeTab === 'all' ? '#80ACC2' : '#6c757d' }}\n                    >\n                      All Reports\n                    </Nav.Link>\n                  </Nav.Item>\n                  <Nav.Item>\n                    <Nav.Link \n                      eventKey=\"pending\" \n                      className=\"text-muted fw-medium\"\n                      style={{ color: activeTab === 'pending' ? '#80ACC2' : '#6c757d' }}\n                    >\n                      Pending\n                    </Nav.Link>\n                  </Nav.Item>\n                  <Nav.Item>\n                    <Nav.Link \n                      eventKey=\"in-progress\" \n                      className=\"text-muted fw-medium\"\n                      style={{ color: activeTab === 'in-progress' ? '#80ACC2' : '#6c757d' }}\n                    >\n                      In Progress\n                    </Nav.Link>\n                  </Nav.Item>\n                  <Nav.Item>\n                    <Nav.Link \n                      eventKey=\"resolved\" \n                      className=\"text-muted fw-medium\"\n                      style={{ color: activeTab === 'resolved' ? '#80ACC2' : '#6c757d' }}\n                    >\n                      Resolved\n                    </Nav.Link>\n                  </Nav.Item>\n                </Nav>\n                <Tab.Content className=\"p-4\">\n                  <ReportList userId={user?._id} status={activeTab === 'all' ? '' : activeTab} />\n                </Tab.Content>\n              </Tab.Container>\n              \n              {/* Quick Actions */}\n              <div className=\"d-flex justify-content-between p-3 border-top bg-light\">\n                <div>\n                  <Button variant=\"outline-secondary\" size=\"sm\" className=\"me-2\">\n                    <i className=\"fas fa-download me-1\"></i>\n                    Export Reports\n                  </Button>\n                  <Button variant=\"outline-secondary\" size=\"sm\">\n                    <i className=\"fas fa-bell me-1\"></i>\n                    Notification Settings\n                  </Button>\n                </div>\n                <Button variant=\"link\" size=\"sm\" className=\"text-decoration-none\">\n                  <i className=\"fas fa-question-circle me-1\"></i>\n                  Help Center\n                </Button>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default UserDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}