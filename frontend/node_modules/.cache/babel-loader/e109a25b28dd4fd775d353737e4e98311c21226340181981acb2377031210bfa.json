{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./context/AuthContext';import Login from'./components/auth/Login';import Register from'./components/auth/Register';import UserDashboard from'./components/dashboard/UserDashboard';import MaintainerDashboard from'./components/dashboard/MaintainerDashboard';import FieldHeadDashboard from'./components/dashboard/FieldHeadDashboard';import History from'./components/dashboard/History';import ReportForm from'./components/reports/ReportForm';import ReportList from'./components/reports/ReportList';import AllReports from'./components/reports/AllReports';import ReportDetails from'./components/reports/ReportDetails';import Header from'./components/common/Header';import Footer from'./components/common/Footer';import Loading from'./components/common/Loading';import'./App.css';// Protected Route Component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles=[]}=_ref;const{user,loading}=useAuth();// Show nothing while loading to prevent premature redirects\nif(loading){return null;}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(allowedRoles.length>0&&!allowedRoles.includes(user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}return children;};function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AppContent,{})})});}function AppContent(){const{user,loading}=useAuth();// Show loading while auth is being checked\nif(loading){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user-dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['user'],children:/*#__PURE__*/_jsx(UserDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/maintainer-dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['maintainer'],children:/*#__PURE__*/_jsx(MaintainerDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/fieldhead-dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['field_head'],children:/*#__PURE__*/_jsx(FieldHeadDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/history\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['field_head'],children:/*#__PURE__*/_jsx(History,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/report-form\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ReportForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ReportList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/all-reports\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['field_head'],children:/*#__PURE__*/_jsx(AllReports,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/report/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ReportDetails,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?user.role==='user'?/*#__PURE__*/_jsx(Navigate,{to:\"/user-dashboard\",replace:true}):user.role==='maintainer'?/*#__PURE__*/_jsx(Navigate,{to:\"/maintainer-dashboard\",replace:true}):user.role==='field_head'?/*#__PURE__*/_jsx(Navigate,{to:\"/fieldhead-dashboard\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","useAuth","Login","Register","UserDashboard","MaintainerDashboard","FieldHeadDashboard","History","ReportForm","ReportList","AllReports","ReportDetails","Header","Footer","Loading","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","allowedRoles","user","loading","to","replace","length","includes","role","App","AppContent","className","path","element"],"sources":["/Users/sunnykishan/maincp/campus-issue-reporter/frontend/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './context/AuthContext';\nimport Login from './components/auth/Login';\nimport Register from './components/auth/Register';\nimport UserDashboard from './components/dashboard/UserDashboard';\nimport MaintainerDashboard from './components/dashboard/MaintainerDashboard';\nimport FieldHeadDashboard from './components/dashboard/FieldHeadDashboard';\nimport History from './components/dashboard/History';\nimport ReportForm from './components/reports/ReportForm';\nimport ReportList from './components/reports/ReportList';\nimport AllReports from './components/reports/AllReports';\nimport ReportDetails from './components/reports/ReportDetails';\nimport Header from './components/common/Header';\nimport Footer from './components/common/Footer';\nimport Loading from './components/common/Loading';\nimport './App.css';\n\n// Protected Route Component\nconst ProtectedRoute = ({ children, allowedRoles = [] }) => {\n  const { user, loading } = useAuth();\n\n  // Show nothing while loading to prevent premature redirects\n  if (loading) {\n    return null;\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user.role)) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return children;\n};\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <AppContent />\n      </Router>\n    </AuthProvider>\n  );\n}\n\nfunction AppContent() {\n  const { user, loading } = useAuth();\n\n  // Show loading while auth is being checked\n  if (loading) {\n    return <Loading />;\n  }\n\n  return (\n    <div className=\"App\">\n      <Header />\n      <main>\n        <Routes>\n          <Route path=\"/login\" element={user ? <Navigate to=\"/\" replace /> : <Login />} />\n          <Route path=\"/register\" element={user ? <Navigate to=\"/\" replace /> : <Register />} />\n          <Route path=\"/user-dashboard\" element={\n            <ProtectedRoute allowedRoles={['user']}>\n              <UserDashboard />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/maintainer-dashboard\" element={\n            <ProtectedRoute allowedRoles={['maintainer']}>\n              <MaintainerDashboard />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/fieldhead-dashboard\" element={\n            <ProtectedRoute allowedRoles={['field_head']}>\n              <FieldHeadDashboard />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/history\" element={\n            <ProtectedRoute allowedRoles={['field_head']}>\n              <History />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/report-form\" element={\n            <ProtectedRoute>\n              <ReportForm />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/reports\" element={\n            <ProtectedRoute>\n              <ReportList />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/all-reports\" element={\n            <ProtectedRoute allowedRoles={['field_head']}>\n              <AllReports />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/report/:id\" element={\n            <ProtectedRoute>\n              <ReportDetails />\n            </ProtectedRoute>\n          } />\n          <Route path=\"/\" element={\n            user ? (\n              user.role === 'user' ? <Navigate to=\"/user-dashboard\" replace /> :\n              user.role === 'maintainer' ? <Navigate to=\"/maintainer-dashboard\" replace /> :\n              user.role === 'field_head' ? <Navigate to=\"/fieldhead-dashboard\" replace /> :\n              <Navigate to=\"/login\" replace />\n            ) : (\n              <Navigate to=\"/login\" replace />\n            )\n          } />\n        </Routes>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}