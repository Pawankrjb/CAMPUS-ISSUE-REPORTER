{"ast":null,"code":"import _objectSpread from\"/Users/sunnykishan/maincp/campus-issue-reporter/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Form,Button,Alert,Card,Container}from'react-bootstrap';import{Link}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[formData,setFormData]=useState({collegeId:'',password:'',name:'',role:'user',department:''});const[error,setError]=useState('');const[message,setMessage]=useState('');const[loading,setLoading]=useState(false);const{login}=useAuth();const{collegeId,password,name,role,department}=formData;const onChange=e=>setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();setError('');setMessage('');setLoading(true);try{const response=await api.post('/auth/register',formData);login(response.data.token,response.data.user);setMessage('Registration successful');// Redirect will be handled by the AuthContext\n}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to register');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{className:\"d-flex align-items-center justify-content-center\",style:{minHeight:'80vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",style:{maxWidth:'400px'},children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Register\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),message&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:message}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"collegeId\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"College ID\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"collegeId\",value:collegeId,onChange:onChange,required:true,placeholder:\"Enter your college ID\"})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",value:password,onChange:onChange,required:true,placeholder:\"Enter your password\"})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"name\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Full Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",value:name,onChange:onChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"role\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Role\"}),/*#__PURE__*/_jsxs(Form.Select,{name:\"role\",value:role,onChange:onChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User (Reporter)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maintainer\",children:\"Maintainer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"field_head\",children:\"Field Head (Department Head)\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"department\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Department\"}),/*#__PURE__*/_jsxs(Form.Select,{name:\"department\",value:department,onChange:onChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Department\"}),/*#__PURE__*/_jsx(\"option\",{value:\"road\",children:\"Road\"}),/*#__PURE__*/_jsx(\"option\",{value:\"electric\",children:\"Electric\"}),/*#__PURE__*/_jsx(\"option\",{value:\"water\",children:\"Water\"}),/*#__PURE__*/_jsx(\"option\",{value:\"building\",children:\"Building\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsx(Button,{disabled:loading,className:\"w-100\",type:\"submit\",children:\"Register\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 text-center mt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Already have an account? Login\"})})]})})})});};export default Register;","map":{"version":3,"names":["React","useState","Form","Button","Alert","Card","Container","Link","useAuth","api","jsx","_jsx","jsxs","_jsxs","Register","formData","setFormData","collegeId","password","name","role","department","error","setError","message","setMessage","loading","setLoading","login","onChange","e","_objectSpread","target","value","handleSubmit","preventDefault","response","post","data","token","user","_error$response","_error$response$data","className","style","minHeight","children","maxWidth","Body","variant","onSubmit","Group","id","Label","Control","type","required","placeholder","Select","disabled","to"],"sources":["/Users/sunnykishan/maincp/campus-issue-reporter/frontend/src/components/auth/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Form, Button, Alert, Card, Container } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\n\nconst Register = () => {\n  const [formData, setFormData] = useState({\n    collegeId: '',\n    password: '',\n    name: '',\n    role: 'user',\n    department: ''\n  });\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { login } = useAuth();\n\n  const { collegeId, password, name, role, department } = formData;\n\n  const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n    setLoading(true);\n\n    try {\n      const response = await api.post('/auth/register', formData);\n      login(response.data.token, response.data.user);\n      setMessage('Registration successful');\n      // Redirect will be handled by the AuthContext\n    } catch (error) {\n      setError(error.response?.data?.error || 'Failed to register');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: '80vh' }}>\n      <div className=\"w-100\" style={{ maxWidth: '400px' }}>\n        <Card>\n          <Card.Body>\n            <h2 className=\"text-center mb-4\">Register</h2>\n            {error && <Alert variant=\"danger\">{error}</Alert>}\n            {message && <Alert variant=\"success\">{message}</Alert>}\n            \n              <Form onSubmit={handleSubmit}>\n                <Form.Group id=\"collegeId\" className=\"mb-3\">\n                  <Form.Label>College ID</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"collegeId\"\n                    value={collegeId}\n                    onChange={onChange}\n                    required\n                    placeholder=\"Enter your college ID\"\n                  />\n                </Form.Group>\n\n                <Form.Group id=\"password\" className=\"mb-3\">\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    type=\"password\"\n                    name=\"password\"\n                    value={password}\n                    onChange={onChange}\n                    required\n                    placeholder=\"Enter your password\"\n                  />\n                </Form.Group>\n\n                <Form.Group id=\"name\" className=\"mb-3\">\n                  <Form.Label>Full Name</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={name}\n                    onChange={onChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group id=\"role\" className=\"mb-3\">\n                  <Form.Label>Role</Form.Label>\n                  <Form.Select name=\"role\" value={role} onChange={onChange}>\n                    <option value=\"user\">User (Reporter)</option>\n                    <option value=\"maintainer\">Maintainer</option>\n                    <option value=\"field_head\">Field Head (Department Head)</option>\n                  </Form.Select>\n                </Form.Group>\n\n                <Form.Group id=\"department\" className=\"mb-3\">\n                  <Form.Label>Department</Form.Label>\n                  <Form.Select name=\"department\" value={department} onChange={onChange} required>\n                    <option value=\"\">Select Department</option>\n                    <option value=\"road\">Road</option>\n                    <option value=\"electric\">Electric</option>\n                    <option value=\"water\">Water</option>\n                    <option value=\"building\">Building</option>\n                    <option value=\"other\">Other</option>\n                  </Form.Select>\n                </Form.Group>\n\n                <Button disabled={loading} className=\"w-100\" type=\"submit\">\n                  Register\n                </Button>\n              </Form>\n            \n            <div className=\"w-100 text-center mt-3\">\n              <Link to=\"/login\">Already have an account? Login</Link>\n            </div>\n          </Card.Body>\n        </Card>\n      </div>\n    </Container>\n  );\n};\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}