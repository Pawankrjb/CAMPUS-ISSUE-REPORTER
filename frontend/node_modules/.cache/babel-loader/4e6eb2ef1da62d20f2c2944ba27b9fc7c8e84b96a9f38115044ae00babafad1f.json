{"ast":null,"code":"import React,{useState}from'react';import{Container,Row,Col,Card,Tabs,Tab,Button,Alert}from'react-bootstrap';import{Link}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import ReportList from'../reports/ReportList';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FieldHeadDashboard=()=>{const{user}=useAuth();const[bulkActionLoading,setBulkActionLoading]=useState(false);const[alertMessage,setAlertMessage]=useState('');const[alertType,setAlertType]=useState('');const handleBulkVerify=async()=>{if(!(user!==null&&user!==void 0&&user.department))return;setBulkActionLoading(true);try{const response=await api.put('/reports/bulk-verify',{department:user.department,fieldHeadId:user._id});setAlertMessage(\"Successfully verified \".concat(response.data.verifiedCount,\" reports\"));setAlertType('success');setTimeout(()=>{setAlertMessage('');window.location.reload();},3000);}catch(error){var _error$response,_error$response$data;setAlertMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to verify reports');setAlertType('danger');}finally{setBulkActionLoading(false);}};const handleBulkMarkFake=async()=>{if(!(user!==null&&user!==void 0&&user.department))return;setBulkActionLoading(true);try{const response=await api.put('/reports/bulk-mark-fake',{department:user.department,fieldHeadId:user._id});setAlertMessage(\"Successfully marked \".concat(response.data.markedCount,\" reports as fake\"));setAlertType('success');setTimeout(()=>{setAlertMessage('');window.location.reload();},3000);}catch(error){var _error$response2,_error$response2$data;setAlertMessage(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to mark reports as fake');setAlertType('danger');}finally{setBulkActionLoading(false);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Field Head Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[\"Department: \",user===null||user===void 0?void 0:user.department,\" - Verify and manage reports in your department\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn\",onClick:()=>window.location.reload(),style:{backgroundColor:'#6e979d',borderColor:'#6e979d',color:'white',transition:'all 0.3s ease'},onMouseEnter:e=>{e.target.style.backgroundColor='#8ba8ad';e.target.style.borderColor='#8ba8ad';},onMouseLeave:e=>{e.target.style.backgroundColor='#6e979d';e.target.style.borderColor='#6e979d';},children:\"Refresh Reports\"}),/*#__PURE__*/_jsx(\"a\",{role:\"button\",tabIndex:\"0\",href:\"/history\",className:\"btn btn-outline-secondary\",children:\"View History\"})]})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{as:\"h5\",children:\"Verify Reports\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(ReportList,{view:\"verify_section\"})})]})})})]});};export default FieldHeadDashboard;","map":{"version":3,"names":["React","useState","Container","Row","Col","Card","Tabs","Tab","Button","Alert","Link","useAuth","ReportList","api","jsx","_jsx","jsxs","_jsxs","FieldHeadDashboard","user","bulkActionLoading","setBulkActionLoading","alertMessage","setAlertMessage","alertType","setAlertType","handleBulkVerify","department","response","put","fieldHeadId","_id","concat","data","verifiedCount","setTimeout","window","location","reload","error","_error$response","_error$response$data","handleBulkMarkFake","markedCount","_error$response2","_error$response2$data","children","className","type","onClick","style","backgroundColor","borderColor","color","transition","onMouseEnter","e","target","onMouseLeave","role","tabIndex","href","Header","as","Body","view"],"sources":["/Users/sunnykishan/maincp/campus-issue-reporter/frontend/src/components/dashboard/FieldHeadDashboard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Row, Col, Card, Tabs, Tab, Button, Alert } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport ReportList from '../reports/ReportList';\nimport api from '../../services/api';\n\nconst FieldHeadDashboard = () => {\n  const { user } = useAuth();\n  const [bulkActionLoading, setBulkActionLoading] = useState(false);\n  const [alertMessage, setAlertMessage] = useState('');\n  const [alertType, setAlertType] = useState('');\n\n  const handleBulkVerify = async () => {\n    if (!user?.department) return;\n\n    setBulkActionLoading(true);\n    try {\n      const response = await api.put('/reports/bulk-verify', {\n        department: user.department,\n        fieldHeadId: user._id\n      });\n\n      setAlertMessage(`Successfully verified ${response.data.verifiedCount} reports`);\n      setAlertType('success');\n      setTimeout(() => {\n        setAlertMessage('');\n        window.location.reload();\n      }, 3000);\n    } catch (error) {\n      setAlertMessage(error.response?.data?.error || 'Failed to verify reports');\n      setAlertType('danger');\n    } finally {\n      setBulkActionLoading(false);\n    }\n  };\n\n  const handleBulkMarkFake = async () => {\n    if (!user?.department) return;\n\n    setBulkActionLoading(true);\n    try {\n      const response = await api.put('/reports/bulk-mark-fake', {\n        department: user.department,\n        fieldHeadId: user._id\n      });\n\n      setAlertMessage(`Successfully marked ${response.data.markedCount} reports as fake`);\n      setAlertType('success');\n      setTimeout(() => {\n        setAlertMessage('');\n        window.location.reload();\n      }, 3000);\n    } catch (error) {\n      setAlertMessage(error.response?.data?.error || 'Failed to mark reports as fake');\n      setAlertType('danger');\n    } finally {\n      setBulkActionLoading(false);\n    }\n  };\n\n  return (\n    <Container>\n      <Row className=\"mb-4\">\n        <Col>\n          <h1>Field Head Dashboard</h1>\n          <p className=\"text-muted\">Department: {user?.department} - Verify and manage reports in your department</p>\n          <div className=\"d-flex gap-2 mt-3\">\n            <button\n              type=\"button\"\n              className=\"btn\"\n              onClick={() => window.location.reload()}\n              style={{\n                backgroundColor: '#6e979d',\n                borderColor: '#6e979d',\n                color: 'white',\n                transition: 'all 0.3s ease'\n              }}\n              onMouseEnter={(e) => {\n                e.target.style.backgroundColor = '#8ba8ad';\n                e.target.style.borderColor = '#8ba8ad';\n              }}\n              onMouseLeave={(e) => {\n                e.target.style.backgroundColor = '#6e979d';\n                e.target.style.borderColor = '#6e979d';\n              }}\n            >\n              Refresh Reports\n            </button>\n            <a role=\"button\" tabIndex=\"0\" href=\"/history\" className=\"btn btn-outline-secondary\">\n              View History\n            </a>\n          </div>\n        </Col>\n      </Row>\n\n\n\n      <Row>\n        <Col>\n          <Card>\n            <Card.Header as=\"h5\">Verify Reports</Card.Header>\n            <Card.Body>\n              <ReportList view=\"verify_section\" />\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default FieldHeadDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}